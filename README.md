# Bun Enterprise API Starter (Express + TypeScript + TSOA)

An enterprise-ready REST API boilerplate using Bun runtime with Express, TypeScript, TSOA routing, Swagger docs, and a clean service/repository architecture. Includes structured folders, logging (Pino), security middleware, and sample CRUD endpoints.

## Features

- Bun runtime with first-class TypeScript support
- Express with security middleware (helmet, cors, compression)
- TSOA decorators for controllers and route generation
- Swagger UI at `/docs` and spec at `/swagger.json` (generated to `src/swagger.json`)
- Simple security via TSOA `@Security('anonymous')` with pluggable auth hook
- Pino logger with pretty output in dev
- Centralized error handling and 404 handler
- Clean architecture: controllers, services, repositories, models, middleware, config

## Project Structure

```
src/
	app.ts                 # Express app factory (middlewares, routes, Swagger UI)
	server.ts              # Boots the server
	authentication.ts      # TSOA auth hook (handles @Security)
	config/env.ts          # Env config via dotenv
	controllers/           # TSOA controllers (decorators + responses)
		UsersController.ts
	services/              # Business logic (async service layer)
		UserService.ts
	repositories/          # Data access (in-memory demo; swap for DB)
		UserRepository.ts
	models/                # Domain models & DTOs
		User.ts
	middleware/            # Logging, errors, 404
		errorHandler.ts
		notFound.ts
		requestLogger.ts
	routes.ts              # GENERATED by TSOA (do not edit)
	swagger.json           # GENERATED OpenAPI spec (do not edit)
tsoa.json                # TSOA config (spec + routes)
index.ts                 # Entry point (starts server)
```

## Setup

Install dependencies:

```powershell
bun install
```

Generate Swagger spec and routes (from TSOA controllers):

```powershell
bun run gen
```

Start in dev (watches files):

```powershell
bun run dev
```

Start normally:

```powershell
bun run start
```

Environment variables: create a `.env` based on `.env.example`.

## Sample Endpoints

- Health check: `GET /healthz`
- Users API (basePath `/api`):
	- `GET /api/users` – list users
	- `GET /api/users/{id}` – get user by id
	- `POST /api/users` – create user (JSON body: `{ name, email }`)
	- `PUT /api/users/{id}` – update user (JSON body: `{ name?, email? }`)
	- `DELETE /api/users/{id}` – delete user

Swagger UI: open `http://localhost:3000/docs`

## Notes

- Generated files:
	- `src/routes.ts` – Express routes generated by TSOA
	- `src/swagger.json` – OpenAPI spec generated by TSOA
- If you change controllers or models, re-run `bun run gen`.
- For production, Bun can run TypeScript directly; a separate build step is optional.

